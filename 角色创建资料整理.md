# 龙与地下城角色创建资料整理

本文档整理了参考资料/龙与地下城/data目录中与角色创建相关的核心信息，为游戏设计提供参考。

## 目录

1. [种族系统](#种族系统)
2. [职业系统](#职业系统)
3. [背景系统](#背景系统)
4. [专长系统](#专长系统)
5. [角色创建选项](#角色创建选项)
6. [数据文件说明](#数据文件说明)

## 种族系统

### 数据来源
- **主文件**: `races.json` (20,107行)
- **描述文件**: `fluff-races.json`

### 种族数据结构
每个种族包含以下核心信息：

#### 基础属性
- **name**: 种族名称
- **source**: 来源书籍
- **page**: 页码
- **size**: 体型（如"M"表示中型）
- **speed**: 移动速度（包括步行、飞行等）

#### 能力值调整
- **ability**: 属性值加成数组
  - 例如：`{"dex": 2, "wis": 2}` 表示敏捷+2，感知+2

#### 种族特性
- **traitTags**: 特性标签（如"Natural Weapon"、"NPC Race"）
- **entries**: 详细的种族特性描述
  - 包含特性名称和具体效果
  - 支持伤害骰子表示法（如`{@damage 1d6}`）

#### 熟练项
- **languageProficiencies**: 语言熟练项
- **skillProficiencies**: 技能熟练项（如果有）
- **weaponProficiencies**: 武器熟练项（如果有）

#### 示例：阿拉寇克拉（Aarakocra）
```json
{
  "name": "Aarakocra",
  "source": "DMG",
  "size": ["M"],
  "speed": {
    "walk": 20,
    "fly": 50
  },
  "ability": [{
    "dex": 2,
    "wis": 2
  }],
  "traitTags": ["Natural Weapon", "NPC Race"],
  "entries": [
    {
      "name": "Dive Attack",
      "entries": ["飞行俯冲攻击额外造成1d6伤害"]
    },
    {
      "name": "Talons",
      "entries": ["爪击造成1d4挥砍伤害"]
    }
  ]
}
```

## 职业系统

### 数据来源
- **目录**: `class/`
- **职业文件**: `class-[职业名].json`
- **描述文件**: `fluff-class-[职业名].json`

### 可用职业列表
1. **人工师** (Artificer)
2. **野蛮人** (Barbarian)
3. **吟游诗人** (Bard)
4. **牧师** (Cleric)
5. **德鲁伊** (Druid)
6. **战士** (Fighter)
7. **武僧** (Monk)
8. **秘术师** (Mystic)
9. **圣武士** (Paladin)
10. **游侠** (Ranger)
11. **盗贼** (Rogue)
12. **伙伴** (Sidekick)
13. **术士** (Sorcerer)
14. **邪术师** (Warlock)
15. **法师** (Wizard)

### 职业数据结构
每个职业包含以下核心信息：

#### 基础属性
- **name**: 职业名称
- **source**: 来源书籍
- **page**: 页码
- **hd**: 生命骰（数量和面数）
- **proficiency**: 豁免检定熟练项

#### 起始熟练项
- **startingProficiencies**: 起始熟练项
  - **armor**: 护甲熟练项
  - **weapons**: 武器熟练项
  - **skills**: 技能选择
  - **tools**: 工具熟练项（如果有）

#### 职业特性
- **optionalfeatureProgression**: 可选特性进展
- **classFeatures**: 职业特性列表
- **subclassTitle**: 子职业标题

#### 示例：战士（Fighter）
```json
{
  "name": "Fighter",
  "source": "PHB",
  "hd": {
    "number": 1,
    "faces": 10
  },
  "proficiency": ["str", "con"],
  "startingProficiencies": {
    "armor": ["light", "medium", "heavy", "shield"],
    "weapons": ["simple", "martial"],
    "skills": {
      "choose": {
        "from": ["技能列表"],
        "count": 2
      }
    }
  }
}
```

## 背景系统

### 数据来源
- **主文件**: `backgrounds.json` (28,049行)
- **描述文件**: `fluff-backgrounds.json`

### 背景数据结构
每个背景包含以下核心信息：

#### 基础属性
- **name**: 背景名称
- **source**: 来源书籍
- **page**: 页码

#### 熟练项
- **skillProficiencies**: 技能熟练项
- **languageProficiencies**: 语言熟练项
- **toolProficiencies**: 工具熟练项（如果有）

#### 起始装备
- **startingEquipment**: 起始装备列表
  - 包含具体物品、数量、特殊说明
  - 支持选择性装备（"a"或"b"选项）

#### 背景特性
- **entries**: 背景特性描述
- **fluff**: 背景故事和建议

#### 示例：侍僧（Acolyte）
```json
{
  "name": "Acolyte",
  "source": "PHB",
  "skillProficiencies": [
    {
      "insight": true,
      "religion": true
    }
  ],
  "languageProficiencies": [
    {
      "anyStandard": 2
    }
  ],
  "startingEquipment": [
    {
      "_": [
        {"item": "holy symbol|phb"},
        {"special": "sticks of incense", "quantity": 5},
        {"special": "vestments"},
        "common clothes|phb",
        {"item": "pouch|phb", "containsValue": 1500}
      ]
    }
  ]
}
```

## 专长系统

### 数据来源
- **主文件**: `feats.json` (8,555行)
- **描述文件**: `fluff-feats.json`

### 专长数据结构
每个专长包含以下核心信息：

#### 基础属性
- **name**: 专长名称
- **source**: 来源书籍
- **page**: 页码

#### 前置条件
- **prerequisite**: 前置条件数组
  - 可包含种族、属性值、其他专长等要求

#### 效果
- **ability**: 属性值提升
- **entries**: 专长效果描述
- **additionalSpells**: 额外法术（如果有）
- **skillProficiencies**: 技能熟练项（如果有）

#### 示例：异常龙纹（Aberrant Dragonmark）
```json
{
  "name": "Aberrant Dragonmark",
  "source": "ERLW",
  "prerequisite": [
    {
      "other": "No other dragonmark"
    }
  ],
  "ability": [
    {
      "con": 1
    }
  ],
  "additionalSpells": {
    "ability": "con",
    "known": {
      "_": [{"choose": "level=0|class=Sorcerer"}]
    },
    "innate": {
      "_": {
        "rest": {
          "1": [{"choose": "level=1|class=Sorcerer"}]
        }
      }
    }
  }
}
```

## 角色创建选项

### 数据来源
- **主文件**: `charcreationoptions.json` (1,887行)
- **描述文件**: `fluff-charcreationoptions.json`

### 选项类型
- **CS**: 角色秘密 (Character Secrets)
- **SG**: 超自然天赋 (Supernatural Gifts)
- **其他**: 各种特殊角色选项

### 数据结构
每个选项包含：
- **name**: 选项名称
- **source**: 来源书籍
- **optionType**: 选项类型
- **prerequisite**: 前置条件（如果有）
- **entries**: 选项描述和效果

#### 示例：阿拉贡达尔后裔（Alagondar Scion）
```json
{
  "name": "Alagondar Scion",
  "source": "IDRotF",
  "prerequisite": [
    {
      "race": [
        {"name": "human"},
        {"name": "half-elf"},
        {"name": "half-orc"}
      ]
    }
  ],
  "optionType": ["CS"],
  "entries": [
    "我是阿拉贡达尔血脉的后裔，是无冬城王冠的唯一已知继承人..."
  ]
}
```

## 数据文件说明

### 核心角色创建文件
| 文件名 | 内容 | 行数 | 说明 |
|--------|------|------|------|
| `races.json` | 种族数据 | 20,107 | 包含所有可用种族的完整信息 |
| `backgrounds.json` | 背景数据 | 28,049 | 包含所有角色背景的详细信息 |
| `feats.json` | 专长数据 | 8,555 | 包含所有专长的完整规则 |
| `charcreationoptions.json` | 角色创建选项 | 1,887 | 特殊角色创建选项和变体 |
| `class/` | 职业目录 | - | 包含15个职业的详细数据 |

### 辅助文件
| 文件前缀 | 说明 |
|----------|------|
| `fluff-*` | 背景故事和描述性文本 |
| `foundry-*` | Foundry VTT集成数据 |
| `index.json` | 索引文件 |

### 数据格式特点
1. **统一的JSON结构**：所有数据都使用标准化的JSON格式
2. **引用系统**：使用`{@damage 1d6}`等标记进行交叉引用
3. **来源追踪**：每个条目都标明来源书籍和页码
4. **版本管理**：支持重印和版本更新追踪
5. **模块化设计**：核心数据与描述文本分离

### 使用建议
1. **角色创建流程**：种族 → 职业 → 背景 → 专长/选项
2. **数据完整性**：所有核心规则都有完整的数据支持
3. **扩展性**：结构化数据便于程序化处理和扩展
4. **本地化**：可基于现有结构进行中文本地化

---

*本文档基于参考资料/龙与地下城/data目录中的官方数据整理，为游戏设计和开发提供结构化参考。*